function _UsersManagementPartial(n,t){_BasePartial.apply(this,arguments);this.usersApiUrl=t;this.grid=this.elem.find(".grid");this.pagerID="#"+this.elem.find(".pager").attr("id");this.onBeforeShowEditForm=function(n){$("#Email",n).attr("readonly","readonly")};this.onBeforeShowAddForm=function(n){$("#Email",n).removeAttr("readonly","readonly")};this.onAfterSubmit=function(n){var t=n.responseJSON;return t.isSuccessStatusCode===!1?[!1,t.reasonPhrase]:[!0,"",""]};this.init=function(){this.grid.jqGrid({url:this.usersApiUrl,datatype:"json",colModel:[{label:"Email",name:"Email",width:100,editable:!0},{label:"Roles",name:"Roles",width:100,cellattr:function(){return'style="white-space: normal;"'},editable:!0,formatter:"select",edittype:"select",editoptions:{multiple:!0,value:this.getRoles()}},{label:"Password",name:"Password",hidden:!0,editable:!0,editrules:{edithidden:!0},hidedlg:!0}],autowidth:!0,height:"auto",loadonce:!1,altRows:!0,colMenu:!0,menubar:!0,viewrecords:!0,hoverrows:!0,rowNum:10,caption:"Управление пользователями",sortable:!0,pager:this.pagerID,editurl:this.usersApiUrl});this.grid.navGrid(this.pagerID,{edit:!0,add:!0,del:!0,search:!0,refresh:!0,view:!0,position:"left",cloneToTop:!1},{editCaption:"Роли",closeAfterEdit:!0,reloadAfterSubmit:!0,recreateForm:!0,afterSubmit:utils.bind(this,this.onAfterSubmit),beforeShowForm:utils.bind(this,this.onBeforeShowEditForm)},{closeAfterAdd:!0,reloadAfterSubmit:!0,recreateForm:!0,afterSubmit:utils.bind(this,this.onAfterSubmit),beforeShowForm:utils.bind(this,this.onBeforeShowAddForm)},{errorTextFormat:function(n){return"Error: "+n.responseText}},{multipleSearch:!0,showQuery:!0})};this.getRoles=function(){return{PrivateReader:"PrivateReader",Administrator:"Administrator"}};this.init()}_UsersManagementPartial.prototype=new _BasePartial;